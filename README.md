## 성능 개선을 위한 캐싱 및 Redis 활용 방안

# 1. 성능 저하 원인 분석

  > 조회가 오래 걸리는 API
 * 예약 가능 날짜 조회 API
 - 매 요청마다 DB에서 예약 가능 날짜를 조회하는 쿼리를 실행
 - 데이터가 많아질수록 조회 시간이 증가
 * 예약 가능 좌석 조회 API
 - 특정 날짜에 예약 가능한 좌석을 조회하는 과정에서 다수의 트랜잭션이 발생
 - 동시 요청이 많아질 경우 DB 부하 증가
 * 잔액 조회 API
 - 사용자의 잔액을 매번 DB에서 조회하는 방식
 - 사용자의 요청이 많아질 경우 성능 저하 가능
   
# 2. 캐싱 적용 방안
 > (1) 예약 가능 날짜 조회
 * 캐싱 적용 방법
 - 예약 가능 날짜 목록은 자주 변경되지 않음
 - Redis 또는 Spring Cache를 사용하여 일정 시간 동안 캐싱 (예: 10분)
 - 새로운 예약이 추가되거나 제거될 경우 캐시 무효화
 * 적용 후 기대 효과
 - 중복 쿼리 실행 감소로 DB 부하 절감
 - 응답 속도 향상

 > (2) 예약 가능 좌석 조회
 * 캐싱 적용 방법
 - 날짜별 좌석 상태를 Redis에 저장
 - 좌석 예약 요청이 들어오면 Redis에서 데이터를 먼저 조회
 - 좌석 상태 변경 시 Redis 데이터 업데이트
 * 적용 후 기대 효과
 - DB 조회 빈도 감소 
 - 좌석 상태를 빠르게 확인 가능
 - 
 > (3) 잔액 조회
 * 캐싱 적용 방법
 - 사용자별 잔액 정보를 Redis에 저장 (TTL 설정: 5~10초)
 - 일정 시간 내 중복 요청이 들어와도 DB 조회 없이 응답 가능
 - 잔액 변경 시 Redis 데이터 업데이트
 * 적용 후 기대 효과
 - 빈번한 잔액 조회 요청 처리 속도 향상
 - 데이터 일관성을 유지하면서도 성능 개선 가능
   
# 3. Redis 활용 방안

 > (1) 대기열 관리
 * Redis Sorted Set 활용
 - 유저의 대기 순서를 관리
 - 유저 토큰을 키 값으로 사용하여 대기 순서 및 남은 대기 시간 저장
 - 대기열 순서가 변경될 때마다 Redis 업데이트
 * 적용 후 기대 효과
 - 빠른 대기열 조회 및 관리 가능
 - 다수의 인스턴스에서도 일관성 유지
 > (2) 좌석 임시 예약 관리
 *Redis Key-Value Store 활용
 - 좌석을 예약할 때 Redis에 임시 배정 정보를 저장 (TTL: 5분)
 - TTL이 만료되면 자동으로 예약 해제
 *적용 후 기대 효과
 - DB 트랜잭션을 줄이고, 빠른 예약 상태 확인 가능
 - 일정 시간이 지나면 자동 해제되어 데이터 정합성 유지
   
# 4. 결론

 - 캐싱 및 Redis를 활용하여 성능 병목을 줄이고 응답 속도를 개선
 - 조회 빈도가 높은 API(예약 가능 날짜, 좌석, 잔액)에 대해 캐싱 적용
 - 대기열 및 임시 좌석 예약 관리를 Redis로 이관하여 성능 최적화
 - Redis TTL을 적절히 활용하여 데이터 정합성을 유지하면서도 DB 부하 감소

